<!DOCTYPE html><html lang="zh-cmn-Hans"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta http-equiv="Cache-Control" content="no-siteapp"><meta name="renderer" content="webkit"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>fab 部署脚本 | 大饼</title><meta name="author" content="大饼"><meta name="description" content="博客,blog,前端,hexo,nodejs,javascript,python,html,css,npm"><link rel="alternate" href="/rss2.xml" title="大饼" type="application/rss2.xml"><meta name="description" content="这是我常用的 fab 部署脚本的改写通用版本。可能对大型项目没起作用，但是对于小项目，作用还是很大，所以发出来写个文章分享下。"><meta property="og:type" content="article"><meta property="og:title" content="fab 部署脚本"><meta property="og:url" content="http://blog.shenqh.com/2015/12/10/fab_deploy_simple/index.html"><meta property="og:site_name" content="大饼"><meta property="og:description" content="这是我常用的 fab 部署脚本的改写通用版本。可能对大型项目没起作用，但是对于小项目，作用还是很大，所以发出来写个文章分享下。"><meta property="og:updated_time" content="2016-12-02T16:08:39.000Z"><meta name="twitter:card" content="summary"><meta name="twitter:title" content="fab 部署脚本"><meta name="twitter:description" content="这是我常用的 fab 部署脚本的改写通用版本。可能对大型项目没起作用，但是对于小项目，作用还是很大，所以发出来写个文章分享下。"><link rel="stylesheet" href="/css/app.css"></head></html><body class="site-page"><nav class="site-navbar"><ul nav-left><h1>大饼</h1></ul><ul nav-right></ul></nav><section site-body part-post><section post><article id="post-fab_deploy_simple" layout="post"><h1 post-title>fab 部署脚本</h1><time post-time datetime="2015-12-10T14:23:23.000Z" itemprop="datePublished">2015 年 12 月 10 日</time><ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/技术/">技术</a></li></ul><div class="clearfix"></div><div page-excerpt><p>这是我常用的 fab 部署脚本的改写通用版本。</p><p>可能对大型项目没起作用，但是对于小项目，作用还是很大，所以发出来写个文章分享下。</p></div><div page-more><hr><h1 id="有啥功能"><a href="#有啥功能" class="headerlink" title="有啥功能"></a>有啥功能</h1><ul><li>部署开发人员的测试环境</li><li>部署测试环境</li><li>部署生产环境</li></ul><hr><h1 id="部署生产环境"><a href="#部署生产环境" class="headerlink" title="部署生产环境"></a>部署生产环境</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fab deploy:master</div></pre></td></tr></table></figure><hr><h1 id="部署测试环境"><a href="#部署测试环境" class="headerlink" title="部署测试环境"></a>部署测试环境</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fab deploy:dev</div></pre></td></tr></table></figure><hr><h1 id="部署开发人员的测试环境"><a href="#部署开发人员的测试环境" class="headerlink" title="部署开发人员的测试环境"></a>部署开发人员的测试环境</h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">fab deploy:test,userA,funBranch,ubuntu@10.10.10.12</div></pre></td></tr></table></figure><hr><h1 id="依赖"><a href="#依赖" class="headerlink" title="依赖"></a>依赖</h1><p>python, pip, fabric</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">sudo apt-get build-essential python-dev python-pip</div><div class="line">sudo pip install fabric</div></pre></td></tr></table></figure><hr><h1 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h1><ul><li>前 30 行针对性修改</li><li>git 地址针对性修改</li><li>部署前，前端编译，后端编译等等针对修改</li><li>部署后，环境安装，服务重启等等针对修改</li></ul><hr><h1 id="注意事项："><a href="#注意事项：" class="headerlink" title="注意事项："></a>注意事项：</h1><ul><li>所有机器的 ssh 端口，都统一，不支持运行时修改 ssh 端口</li><li>所有仓库的仓库名都一致， 推荐 fork 方式进行 git 协助</li><li>执行这脚本的机器有 ssh 方式部署各个部署 git 仓库的权限，有 ssh 方式访问各个部署机器的权限。</li></ul><hr><p>看看源码：</p><script src="http://gist.github.com/shenqihui/64205c52078ce6c14602.js?file=fabfile.py"></script><hr><p>更多详情，查看 <a href="https://gist.github.com/shenqihui/64205c52078ce6c14602">https://gist.github.com/shenqihui/64205c52078ce6c14602</a></p><p>另外推荐：</p><ul><li><a href="http://lvyaojia.sinaapp.com/2015/01/%E9%A1%B9%E7%9B%AE%E9%83%A8%E7%BD%B2snippet-gitlabfabric/">项目部署SNIPPET (GITLAB+FABRIC)</a></li><li><a href="http://www.fabfile.org/">fabric 官网</a></li></ul></div><nav class="pagination"><a post-prev href="/2015/12/28/bicycling_around_hainan_island/" title="海南骑行环岛游">&#10094; 海南骑行环岛游</a> <a post-next href="/2015/12/08/dark_search/" title="给你们介绍下几大暗黑搜索引擎">给你们介绍下几大暗黑搜索引擎 &#10095;</a></nav></article><section id="comments"><div id="disqus_thread"></div></section></section></section><section site-body class="dn"></section><footer site-footer><div copyright>&copy; 2018 大饼<h4>吾十有五而志于养猪，三十始养，四十亏本，五十再亏，六十亏大了，七十卒，不逾矩。现廿五，将卒。</h4></div><div powered><b>Hexo <a href="https://github.com/shenqihui/hexo-theme-pithy" target="_blank">Pithy</a></b> Theme designed by <b><a href="http://blog.shenqh.com/" target="_blank">shenqihui</a></b>, Powered by <b><a href="http://hexo.io/" target="_blank">Hexo</a></b> and <b><a href="https://pages.github.com/">Github Pages</a></b>. <b><a href="/sitemap.xml">Sitemap</a></b>.</div></footer><script>setTimeout(function(){var e="shenqihuiblog";!function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+e+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}()},100)</script></body>